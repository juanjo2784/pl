<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title> 住专拽 Pro</title>
    <link rel="stylesheet" href="style.css">
    <script src="quagga.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>

    <!-- PANTALLA INTRO -->
    <div id="screen-intro" style="padding: 20px; text-align: center; margin-top: 15vh;">
        <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
            <i class="fas fa-boxes fa-3x" style="color:var(--s); margin-bottom:15px;"></i>
            <h2> </h2>
            <input type="text" id="inp-pedido" placeholder="拽 ">
            <button class="btn-action" style="background:var(--s);" onclick="iniciarApp('rapido')">注 专</button>
            <button class="btn-action" style="background:var(--dark);" onclick="iniciarApp('uno-a-uno')"> 注  ()</button>
        </div>
    </div>

    <!-- PANTALLA PRINCIPAL -->
    <div id="screen-main" class="hidden">
        <div class="header-pedido">: <span id="txt-pedido"></span></div>
        
        <!-- CONTENEDOR CON SCROLL -->
        <div class="main-content">
            <div class="list-container" id="container-lotes"></div>
        </div>
        
    <!--  TOTAL GENERAL FIJO ABAJO -->
        <div id="total-general-bar" style="background: #2d3748; color: white; padding: 12px; 
                                        text-align: center; border-top: 2px solid #48bb78;">
            <span style="font-size: 12px; opacity: 0.8;">住" :</span>
            <span id="total-general-valor" style="font-size: 24px; font-weight: bold; color: #48bb78; margin-right: 10px;">
                0 '
            </span>
        </div>

        <!-- FOOTER FIJO -->
        <div class="nav-footer">
            <button class="icon-btn" style="background:var(--d);" onclick="location.reload()">
                <i class="fas fa-sync-alt"></i>
            </button>
            <button class="icon-btn" style="background:var(--p); transform: scale(1.1);" onclick="activarEscaneo()">
                <i class="fas fa-camera"></i>
            </button>
            <button class="icon-btn" style="background:var(--s);" onclick="descargarCSV()">
                <i class="fas fa-file-export"></i>
            </button>
        </div>
    </div>

    <!-- OVERLAY ESCANER -->
    <div id="overlay-scanner" class="hidden">
        <!-- rea de c谩mara con altura limitada (angosta) -->
        <div class="scanner-camera-area">
            <div id="interactive">
                <div class="scanner-viewfinder">
                    <div class="laser-line"></div>
                </div>
            </div>
            
            <!-- Bot贸n de confirmar -->
            <button id="btn-confirm-capture" class="btn-capture-trigger hidden" onclick="procesarCapturaManual()">
                <i class="fas fa-check"></i> 住专拽转 爪
            </button>
            
            <!-- Bot贸n volver -->
            <button onclick="cerrarEscaner()" class="btn-back">
                <i class="fas fa-arrow-left"></i>
            </button>
            
            <!-- Zoom -->
            <div class="zoom-control">
                <i class="fas fa-search-minus"></i>
                <input type="range" id="zoom-range" min="1" max="3" step="0.1" value="1" oninput="aplicarZoom(this.value)">
                <i class="fas fa-search-plus"></i>
            </div>
        </div>
        
        <!-- Formulario popup desde abajo -->
        <div id="form-scanner" class="form-pop hidden">
            <h3 id="txt-lote-det">转 爪</h3>
            <div id="dynamic-fields"></div>
            <button class="btn-action btn-cancel" onclick="cerrarEscaner()"></button>
        </div>
    </div>
</body>
</html>